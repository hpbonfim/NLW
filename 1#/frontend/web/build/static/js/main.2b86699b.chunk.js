(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/logo.47c4581a.svg"},41:function(e){e.exports=JSON.parse('{"UF":[{"nome":"Acre","sigla":"AC"},{"nome":"Alagoas","sigla":"AL"},{"nome":"Amap\xe1","sigla":"AP"},{"nome":"Amazonas","sigla":"AM"},{"nome":"Bahia","sigla":"BA"},{"nome":"Cear\xe1","sigla":"CE"},{"nome":"Distrito Federal","sigla":"DF"},{"nome":"Esp\xedrito Santo","sigla":"ES"},{"nome":"Goi\xe1s","sigla":"GO"},{"nome":"Maranh\xe3o","sigla":"MA"},{"nome":"Mato Grosso","sigla":"MT"},{"nome":"Mato Grosso do Sul","sigla":"MS"},{"nome":"Minas Gerais","sigla":"MG"},{"nome":"Par\xe1","sigla":"PA"},{"nome":"Para\xedba","sigla":"PB"},{"nome":"Paran\xe1","sigla":"PR"},{"nome":"Pernambuco","sigla":"PE"},{"nome":"Piau\xed","sigla":"PI"},{"nome":"Rio de Janeiro","sigla":"RJ"},{"nome":"Rio Grande do Norte","sigla":"RN"},{"nome":"Rio Grande do Sul","sigla":"RS"},{"nome":"Rond\xf4nia","sigla":"RO"},{"nome":"Roraima","sigla":"RR"},{"nome":"Santa Catarina","sigla":"SC"},{"nome":"S\xe3o Paulo","sigla":"SP"},{"nome":"Sergipe","sigla":"SE"},{"nome":"Tocantins","sigla":"TO"}]}')},45:function(e,t,a){e.exports=a(77)},50:function(e,t,a){},51:function(e,t,a){},58:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(40),o=a.n(l),c=(a(50),a(15)),i=a(4),s=a(18),u=a.n(s),m=(a(51),a(23)),d=function(){return r.a.createElement("div",{id:"page-home"},r.a.createElement("div",{className:"content"},r.a.createElement("header",null,r.a.createElement("img",{src:u.a,alt:"logo"})),r.a.createElement("main",null,r.a.createElement("h1",null,"Seu marketplace de coleta de res\xedduos."),r.a.createElement("p",null,"Ajudamos pessoas a encontrarem pontos de coleta de forma eficiente."),r.a.createElement(c.b,{to:"/create-point"},r.a.createElement("span",null,r.a.createElement(m.b,null)),r.a.createElement("strong",null,"Cadastre um ponto de coleta")))))},p=a(44),f=a(21),g=a(28),E=a(17),b=a.n(E),h=a(29),v=a(7),O=(a(58),a(41)),j=a(80),S=a(81),C=a(79),y=a(14),x=a.n(y),k=x.a.create({baseURL:"http://localhost:3333"}),w=a(43),P=(a(76),function(){var e=Object(n.useCallback)((function(e){console.log(e)}),[]),t=Object(w.a)({onDrop:e}),a=t.getRootProps,l=t.getInputProps,o=t.isDragActive;return r.a.createElement("div",Object.assign({className:"dropzone"},a()),r.a.createElement("input",l()),o?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))}),N=function(){var e=Object(i.e)(),t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){k.get("items").then((function(e){o(e.data)}))}),[]);var s=Object(n.useState)([]),d=Object(v.a)(s,2),E=d[0],y=d[1];Object(n.useEffect)((function(){x.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados").then((function(e){y(e.data.map((function(e){return e.sigla})))}))}),[]);var w=Object(n.useState)("0"),N=Object(v.a)(w,2),A=N[0],R=N[1],F=Object(n.useState)("0"),M=Object(v.a)(F,2),D=M[0],G=M[1],B=Object(n.useState)([]),J=Object(v.a)(B,2),U=J[0],z=J[1];Object(n.useEffect)((function(){"0"!==A&&x.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(A,"/municipios")).then((function(e){z(e.data.map((function(e){return e.nome})))}))}),[A]),Object(n.useEffect)((function(){x.a.get("https://nominatim.openstreetmap.org/search?format=json&state=".concat(A,"&city=").concat(D)).then((function(e){if("0"===D||"0"===A)return-1;var t=e.data;console.log(A),H([t[0].lat,t[0].lon])})).catch((function(e){console.error(e)}))}),[D]);var I=Object(n.useState)(2),T=Object(v.a)(I,2),_=T[0],L=T[1],V=Object(n.useState)([0,0]),W=Object(v.a)(V,2),q=W[0],H=W[1],K=Object(n.useState)([0,0]),Q=Object(v.a)(K,2),X=Q[0],Y=Q[1],Z=Object(n.useState)(""),$=Object(v.a)(Z,2);$[0],$[1];Object(n.useEffect)((function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;Y([a,n])}));else{var e=Object(v.a)(q,2),t=e[0],a=e[1];Y([t,a])}}),[q,X]),Object(n.useEffect)((function(){var e=Object(v.a)(q,2),t=e[0],a=e[1];x.a.get("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(t,"&lon=").concat(a)).then(function(){var e=Object(h.a)(b.a.mark((function e(n){var r,l,o,c,i,s,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data,0===t||0===a){e.next=24;break}if(e.prev=2,void 0!==r){e.next=5;break}throw new Error("no data received");case 5:if("br"===r.address.country_code){e.next=9;break}return e.abrupt("return",(alert("Selecione somente estados Brasileiros"),H([0,0]),R("0"),G("0")));case 9:if(null==r.address.state){e.next=16;break}l=r.address,o=l.state,c=l.city_district,i=l.city,s=l.village,u=l.town,console.log(r),O.UF.filter((function(e){return e.nome===o})).map((function(e){return R(e.sigla)})),U.filter((function(e){return i===e||u===e||s===e||c===e})).map((function(e){return G(e)})),e.next=17;break;case 16:throw new Error("invalid data");case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(2),e.abrupt("return",(alert("Selecione somente estados Brasileiros"),H([0,0]),R("0"),G("0"),L(5)));case 22:e.next=25;break;case 24:return e.abrupt("return",-1);case 25:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}))}),[q,_]);var ee=Object(n.useState)({name:"",email:"",whatsapp:""}),te=Object(v.a)(ee,2),ae=te[0],ne=te[1];function re(e){var t=e.target,a=t.name,n=t.value;ne(Object(g.a)(Object(g.a)({},ae),{},Object(f.a)({},a,n)))}var le=Object(n.useState)([]),oe=Object(v.a)(le,2),ce=oe[0],ie=oe[1];function se(){return(se=Object(h.a)(b.a.mark((function t(a){var n,r,l,o,c,i,s,u,m;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=ae.name,r=ae.email,l=ae.whatsapp,o=A,c=D,i=Object(v.a)(q,2),s=i[0],u=i[1],m={name:n,email:r,whatsapp:l,uf:o,city:c,latitude:s,longitude:u,items:ce},t.next=9,k.post("points",m);case 9:alert("Criado com sucesso"),e.push("/");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{id:"page-create-point"},r.a.createElement("header",null,r.a.createElement("img",{src:u.a,alt:"Ecoleta"}),r.a.createElement(c.b,{to:"/"},r.a.createElement(m.a,null),"Voltar para home")),r.a.createElement("form",{onSubmit:function(e){return se.apply(this,arguments)}},r.a.createElement("h1",null,"Cadastro do ",r.a.createElement("br",null)," Ponto de Coleta"),r.a.createElement(P,null),r.a.createElement("fieldset",null,r.a.createElement("legend",null,r.a.createElement("h2",null,"Dados")),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"name"},"Nome da entidade"),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:re})),r.a.createElement("div",{className:"field-group"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"email"},"E-mail"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:re})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"whatsapp"},"WhatsApp"),r.a.createElement("input",{type:"text",name:"whatsapp",id:"whatsapp",onChange:re})))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,r.a.createElement("h2",null,"Endere\xe7o"),r.a.createElement("span",null,"Selecione o endere\xe7o no mapa"))),r.a.createElement(j.a,{center:q,zoom:_,onClick:function(e){return H([e.latlng.lat,e.latlng.lng]),L(18)}},r.a.createElement(S.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),0!==q[0]&&r.a.createElement(C.a,{position:q})),r.a.createElement("div",{className:"field-group"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"uf"},"Estado (UF)"),r.a.createElement("select",{name:"uf",id:"uf",value:A,onChange:function(e){R(e.target.value)}},r.a.createElement("option",{value:"0"},"Selecione uma UF"),E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"city"},"Cidade"),r.a.createElement("select",{name:"city",id:"city",value:D,onChange:function(e){G(e.target.value)}},r.a.createElement("option",{value:"0"},"Selecione uma Cidade"),U.map((function(e){return r.a.createElement("option",{key:e,value:e},e," ")}))))),r.a.createElement("fieldset",null,r.a.createElement("legend",null,r.a.createElement("h2",null,"\xcdtens de Coleta"),r.a.createElement("span",null,"Selecioe um ou mais \xedtens abaixo")),r.a.createElement("ul",{className:"items-grid"},l.map((function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return function(e){if(ce.findIndex((function(t){return t===e}))>=0){var t=ce.filter((function(t){return t!==e}));ie(t)}else ie([].concat(Object(p.a)(ce),[e]))}(e.id)},className:ce.includes(e.id)?"selected":""},r.a.createElement("img",{src:e.image_url,alt:e.title}),r.a.createElement("span",null,e.title))})))),r.a.createElement("button",{type:"submit"},"Cadastrar ponto de Coleta")))},A=function(){return r.a.createElement(c.a,null,r.a.createElement(i.a,{component:d,path:"/",exact:!0}),r.a.createElement(i.a,{component:N,path:"/create-point",exact:!0}))};var R=function(){return r.a.createElement("div",null,r.a.createElement(A,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.2b86699b.chunk.js.map